---
title: 소수판별하기
date : 2023-02-22
id : 소수판별하기
tag: 
   - coding-test
brand: blog
---

## 소수?

- 아마 알고리즘 문제에서 가장 처음으로 마주치는 난관이라고 생각한다. 🥲 학교 수업에서 소수 찾기를 풀 때, 검색을 통해서 꾸역꾸역 풀었던 것으로 기억이 난다. 당시에는 다 이해했다고 생각했는데, 오늘 다시 풀어보니 이제서야 이해를 한 듯하다.
- 소수는 1보다 큰 자연수 중 1과 자기 자신만을 약수로 가지는 수다. 2,3,5,7,11 등의 숫자가 소수에 해당한다고 할 수 있다.

## 어떻게 구할까?

- 가령 입력 된 수가 소수인지 아닌지를 판단할 때, 가장 쉬운 방법은 선형 검색을 통해 2부터 입력된 수 보다 작은 n-1 까지 반복하여 나머지 여부를 찾으면 된다.
    
    ```jsx
    function isPrime(num) {
      if(num === 1){
        return false
      }
    
      for(let i = 2; i<num; i++){
        if(num%i ===0){
          return false;
        }
      }
      return true
    }
    ```
    
- 위의 방식에서 시간을 더 줄일 수 있지 않을까?
    - **제곱근을 사용하기** → 12의 약수는 1\*12, 2\*6, 3\*4, 4\*3, 6\*2, 12\*1로 대칭 관계이다. 따라서 모든 수를 순회할 필요 없이 인자로 넘어온 수의 제곱근 까지만 반복문을 실행한다.
    - **짝수 제외하기 →** 어차피 짝수는 2를 약수로 가진다. 따라서 홀수 만 소수 여부를 파악하면 된다.
```js
function isPrime(num) {
	let sqrt = Math.floor(Math.sqrt(num))
  if(num === 1){
    return false;
  }

	if(num === 2){
    return true;
  }

	if(num % 2 === 0){
    return false;
  }

  for(let i = 3; i<=sqrt; i+=2){
    if(num%i ===0){
      return false;
    }
  }
  return true
}
```

## 2 이상의 자연수를 입력 받아 2부터 해당 수 까지의 모든 소수를 반환
- 기본 방식은 입력 받은 인자의 소수 여부 판단과 같다.
- 가장 기본적인 방식은 이중 반복문을 활용하는 것이다.
    - 먼저 입력 받은 수를 2 ~ n 까지 반복문을 통해 탐색한다.
    - 이후 이중 반복문을 통해 각 수의 소수 여부를 파악한다.
    
```js
function listPrimes(num) {
  let prime = true;
  let str = "";
  for(let i = 2; i<=num; i++){
    if(i === 2)
    {
      str += 2+""
    }
    else
    {
      let sqrt = Math.floor(Math.sqrt(i))
      for(let j =2; j<=sqrt; j++){
        if(i%j===0){
          prime = false;
          break;
        }
      }
      if(prime === true){
        str+= `-${i}`;
      }
      prime = true;  
    }
  }
  return str
}
```
    
- 위의 방법에서도 반복문을 실행할 때, 제곱근 까지만 순회 하고, 홀수인 값만 접근하는 방식으로 풀이가 가능하다. 하지만 태생적인 한계는 극복할 수 없다. 결국 이중 반복문 이기 때문에 위의 방식의 Big-O는 (n^2이다.)


## 💡 **에라토스테네스의 체**
- **소수 찾기에서 가장 흔하게 쓰이고 가장 실행속도가 빠른 방식은 에라토스네스의 체이다.**
- 원리는 아래와 같다. 2부터 순회 하여 2의 배수를 모두 지운다. 이후 3의 배수를 모두 지우는 방식으로 진행한다. 이렇게 하면 소수인 숫자로 시작하는 모든 배수를 지우고 소수를 알 수 있다.
- 이때 실행속도는 무려 **O(log(logn))!!**
```js
function listPrimes(num) {
  let output = new Array(num + 1);

  output.fill(true, 0, num + 1);

  output[0] = false;
  output[1] = false;
  //탈출 조건이 i*i인 것은 제곱근을 순회하는 것과 같은 조건이다.

  for (let i = 2; i * i <= num; i++) {
    if (output[i]) {
      // i의 배수를 제거하기 위해 i씩 더해나가며 제거함
      for (j = i * i; j <= num; j += i) {
        output[j] = false;
      }
    }
  }
  let answer = ""; // 출력을 빈 문자열 형태로 해야 하기 때문에 빈 문자열 생성
  for (let k = 2; k <= num; k++) {
    if (output[k]) {
      answer += `-${k}`;
    }
  }
  return answer.substring(1);
}
		
		
```

- listPrimes(10)
    - [true, true, true, true, true, true, true, true, true, true, true]
    - [false, false, true, true, true, true, true, true, true, true, true]
    - 반복문 실행 i = 2, 4≤10
        - j =  4, 6, 8, 10
        - [false, false, true, true, false, true, false, true, false, true, false]
    - i =3, 9≤10
        - j = 9
        - [false, false, true, true, false, true, false, true, false, false, false]
    - i = 4 , 16≤ 10 —> 반복문 탈출
    - 배열 내에서 true인 index만을 출력